# Qt DLLs
SET( QTDLLS
  "${QT_LIBRARY_DIR}/QtCore4.dll"
  "${QT_LIBRARY_DIR}/QtGui4.dll"
  "${QT_LIBRARY_DIR}/QtNetwork4.dll"
  "${QT_LIBRARY_DIR}/QtSql4.dll"
  "${VTK_LIBRARY_DIRS}/release/QVTK.dll"
  )
INSTALL( FILES ${QTDLLS} DESTINATION bin )

MESSAGE( WARNING ${LIBXML2_LIBRARIES})

# This should work, but seems to prevent other files from being written 
# into the bin directory in the installation tree.
#SET(CPACK_INSTALL_CMAKE_PROJECTS "${CPACK_INSTALL_CMAKE_PROJECTS};${VTK_BINARY_DIR};VTK;ALL;/")

# VTK DLLs
FILE( GLOB VTK_DLLS "${VTK_LIBRARY_DIRS}/release/vtk*.dll" )
INSTALL( FILES ${VTK_DLLS} DESTINATION bin )

# libxml2 DLL
INSTALL( FILES "D:/cquammen/build/libxml2/lib/libxml2.dll" DESTINATION bin )

# VTKMS DLLs
FILE( GLOB VTKMS_DLLS "${VTKMS_LIBRARY_DIRS}/release/vtkms*.dll" )
INSTALL( FILES ${VTKMS_DLLS} DESTINATION bin )

# Shader files
FILE( GLOB VTKMS_SHADERS "${MicroscopeSimulator_SOURCE_DIR}/lib/Shaders/*" )
INSTALL( FILES ${VTKMS_SHADERS} DESTINATION lib/shaders )

# ITK DLLs
FILE( GLOB ITK_DLLS "${ITK_LIBRARY_DIRS}/release/ITKCommon.dll" )
INSTALL( FILES ${ITK_DLLS} DESTINATION bin )

# Change the default installation directory. To make this work you MUST replace
# all occurences of $PROGRAMFILES with @CPACK_INSTALL_DIRECTORY@ in
# C:\Program Files\CMake 2.6\share\cmake-2.6\Modules\NSIS.template.in.
SET( CPACK_INSTALL_DIRECTORY "$PROGRAMFILES\\\\CISMM" )

# Save time by just using the NSIS generator
SET( CPACK_GENERATOR "NSIS" )

# Installer-specific things
SET( CPACK_NSIS_URL_INFO_ABOUT "http://www.cismm.org" )
SET( CPACK_NSIS_CONTACT "cquammen@cs.unc.edu" )

# Both of these need to be set or neither of them is set.
SET( CPACK_NSIS_MUI_ICON "${MicroscopeSimulator_SOURCE_DIR}/apps/MicroscopeSimulator/installer/Win32/Win32Icon.ico" )
SET( CPACK_NSIS_MUI_UNIICON "${MicroscopeSimulator_SOURCE_DIR}/apps/MicroscopeSimulator/installer/Win32/ModernUninstallFull.ico" )
SET( CPACK_NSIS_INSTALLED_ICON_NAME "BIN\\\\MicroscopeSimulator.exe" )